<h1><%= t('players.index.title') %></h1>

<div class="actions">
  <%= link_to t('players.index.new_player'), new_player_path, class: "btn btn-primary" %>
</div>

<div class="players-index">
  <% if @players.any? %>
    <table class="table">
      <thead>
        <tr>
          <th><%= Player.human_attribute_name(:name) %></th>
          <th><%= Player.human_attribute_name(:category) %></th>
          <th><%= Player.human_attribute_name(:affiliation) %></th>
          <th><%= Player.human_attribute_name(:positions) %></th>
          <th><%= Player.human_attribute_name(:pitching_batting) %></th>
          <th><%= t('players.index.height_weight') %></th>
          <th><%= Player.human_attribute_name(:age) %></th>
          <th><%= t('players.index.pick_result') %></th>
        </tr>
      </thead>
      <tbody>
        <% @players.each do |player| %>
          <tr>
            <td>
              <strong><%= link_to player.name, player_path(player) %></strong><br>
              <small><%= player.name_kana %></small>
            </td>
            <td><%= t("activerecord.attributes.player.categories.#{player.category}") if player.category %></td>
            <td><%= player.affiliation %></td>
            <td>
              <%= player.positions.map(&:short_name).join(", ") %>
            </td>
            <td><%= t("activerecord.attributes.player.pitching_battings.#{player.pitching_batting}") if player.pitching_batting %></td>
            <td>
              <% if player.height || player.weight %>
                <%= "#{player.height}#{t('units.cm')}" if player.height %>
                <%= "#{player.weight}#{t('units.kg')}" if player.weight %>
              <% end %>
            </td>
            <td><%= "#{player.age}#{t('units.age')}" if player.age %></td>
            <td>
              <% if player.picks.any? %>
                <% player.picks.each do |result| %>
                  <div>
                    <%= result.year %><%= t('units.year') %>
                    <% if result.team %>
                      <%= result.team.short_name %>
                      <%= "#{result.draft_round}位" if result.draft_round %>
                      <%= t('players.index.training') if result.training_player %>
                    <% else %>
                      <%= t('players.index.not_drafted') %>
                    <% end %>
                  </div>
                <% end %>
              <% else %>
                <%= t('players.index.not_registered') %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  <% else %>
    <p><%= t('players.index.no_players') %></p>
  <% end %>
</div>
