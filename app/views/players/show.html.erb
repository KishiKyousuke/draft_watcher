<h1><%= t('players.show.title') %></h1>

<div class="player-details">
  <div class="player-info">
    <h2><%= @player.name %></h2>
    <p class="name-kana"><%= @player.name_kana %></p>

    <table class="details-table">
      <tr>
        <th><%= Player.human_attribute_name(:category) %></th>
        <td><%= t("activerecord.attributes.player.categories.#{@player.category}") if @player.category %></td>
      </tr>
      <tr>
        <th><%= Player.human_attribute_name(:affiliation) %></th>
        <td><%= @player.affiliation %></td>
      </tr>
      <tr>
        <th><%= Player.human_attribute_name(:positions) %></th>
        <td><%= @player.positions.map(&:name).join(", ") %></td>
      </tr>
      <tr>
        <th><%= Player.human_attribute_name(:pitching_batting) %></th>
        <td><%= t("activerecord.attributes.player.pitching_battings.#{@player.pitching_batting}") if @player.pitching_batting %></td>
      </tr>
      <tr>
        <th><%= Player.human_attribute_name(:height) %></th>
        <td><%= "#{@player.height}#{t('units.cm')}" if @player.height %></td>
      </tr>
      <tr>
        <th><%= Player.human_attribute_name(:weight) %></th>
        <td><%= "#{@player.weight}#{t('units.kg')}" if @player.weight %></td>
      </tr>
      <tr>
        <th><%= Player.human_attribute_name(:age) %></th>
        <td><%= "#{@player.age}#{t('units.age')}" if @player.age %></td>
      </tr>
    </table>

    <% if @player.description.present? %>
      <div class="description">
        <h3><%= Player.human_attribute_name(:description) %></h3>
        <p><%= simple_format(@player.description) %></p>
      </div>
    <% end %>
  </div>

  <div class="player-actions">
    <%= link_to t('players.show.edit'), edit_player_path(@player), class: "btn btn-primary" %>
    <%= link_to t('players.show.delete'), player_path(@player), data: { turbo_method: :delete, turbo_confirm: t('players.show.confirm_delete', name: @player.name) }, class: "btn btn-danger" %>
  </div>

  <div class="draft-results">
    <h3><%= t('players.show.pick_results') %></h3>
    <% if @player.picks.any? %>
      <% @player.picks.each do |result| %>
        <div class="draft-result">
          <strong><%= result.year %><%= t('units.year') %></strong>
          <% if result.team %>
            <%= result.team.short_name %>
            <% if result.training_player %>
              育成<%= result.draft_round %>位
            <% else %>
              <%= "#{result.draft_round}位" if result.draft_round %>
            <% end %>
          <% else %>
            <%= t('players.index.not_drafted') %>
          <% end %>
          <%= link_to t('players.show.edit_pick'), edit_pick_path(result), class: "btn btn-xs btn-secondary" %>
          <%= link_to t('players.show.delete_pick'), pick_path(result), data: { turbo_method: :delete, turbo_confirm: t('players.show.confirm_delete_pick') }, class: "btn btn-xs btn-danger" %>
        </div>
      <% end %>
    <% else %>
      <p><%= t('players.show.no_pick_results') %></p>
    <% end %>
  </div>
</div>

<div class="actions">
  <%= link_to t('players.show.add_pick'), new_pick_path(player_id: @player.id), class: "btn btn-success" %>
</div>

<div class="actions">
  <%= link_to t('players.show.back_to_index'), players_path, class: "btn btn-secondary" %>
</div>